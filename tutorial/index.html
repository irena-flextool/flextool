
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IRENA FlexTool is an energy and power systems model for understanding the role of variable power generation in future energy systems. It performs capacity expansion planning as well as operational planning.">
      
      
        <meta name="author" content="Juha Kiviluoma, VTT Technical Centre of Finland">
      
      
      
        <link rel="prev" href="../install_web_interface/">
      
      
        <link rel="next" href="../reference/">
      
      
      <link rel="icon" href="../irena_flextool_favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44">
    
    
      
        <title>Tutorial - IRENA FlexTool</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#irena-flextool-tutorial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IRENA FlexTool" class="md-header__button md-logo" aria-label="IRENA FlexTool" data-md-component="logo">
      
  <img src="../irena_flextool_favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IRENA FlexTool
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Tutorial
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/irena-flextool/flextool" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IRENA FlexTool" class="md-nav__button md-logo" aria-label="IRENA FlexTool" data-md-component="logo">
      
  <img src="../irena_flextool_favicon.png" alt="logo">

    </a>
    IRENA FlexTool
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/irena-flextool/flextool" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installing and updating
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installing and updating
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interface_overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview of the interfaces to Flextool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_toolbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing IRENA FlexTool - SpineToolbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install_web_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing IRENA FlexTool - Web interface
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-a-small-test-system" class="md-nav__link">
    <span class="md-ellipsis">
      Building a small test system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building a small test system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choosing-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1st-step-a-node-with-no-units" class="md-nav__link">
    <span class="md-ellipsis">
      1st step - a node with no units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interlude-creating-a-scenario-and-running-the-model" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude - creating a scenario and running the model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2nd-step-add-a-coal-unit" class="md-nav__link">
    <span class="md-ellipsis">
      2nd step - add a coal unit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interlude-visualizing-the-system-in-a-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude - visualizing the system in a graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3rd-step-add-a-wind-power-plant" class="md-nav__link">
    <span class="md-ellipsis">
      3rd step - add a wind power plant
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4th-step-add-a-network" class="md-nav__link">
    <span class="md-ellipsis">
      4th step - add a network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      More functionality
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../results/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Model outputs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how_to/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User interfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            User interfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spine_toolbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Toolbox interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spine_database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spine data editor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../browser_interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Browser interface
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-a-small-test-system" class="md-nav__link">
    <span class="md-ellipsis">
      Building a small test system
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building a small test system">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#choosing-the-database" class="md-nav__link">
    <span class="md-ellipsis">
      Choosing the database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1st-step-a-node-with-no-units" class="md-nav__link">
    <span class="md-ellipsis">
      1st step - a node with no units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interlude-creating-a-scenario-and-running-the-model" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude - creating a scenario and running the model
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2nd-step-add-a-coal-unit" class="md-nav__link">
    <span class="md-ellipsis">
      2nd step - add a coal unit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interlude-visualizing-the-system-in-a-graph" class="md-nav__link">
    <span class="md-ellipsis">
      Interlude - visualizing the system in a graph
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3rd-step-add-a-wind-power-plant" class="md-nav__link">
    <span class="md-ellipsis">
      3rd step - add a wind power plant
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4th-step-add-a-network" class="md-nav__link">
    <span class="md-ellipsis">
      4th step - add a network
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-functionality" class="md-nav__link">
    <span class="md-ellipsis">
      More functionality
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="irena-flextool-tutorial">IRENA FlexTool tutorial</h1>
<p>The instructions for installing IRENA FlexTool are at <a href="https://irena-flextool.github.io/flextool/interface_overview">Interface overview</a>.</p>
<p>This user guide will build a small system step-by-step. It assumes you will be using Spine Toolbox as the front-end. If you are using the IRENA FlexTool web-interface, the instructions still apply, but the example figures in this tutorial will not be as helpful. IRENA FlexTool concepts are explained in more depth at <a href="https://irena-flextool.github.io/flextool/reference">Model Parameters</a>. 
Video tutorial for Building a small test system can be watched <a href="https://youtu.be/O94zHxYcS94">here</a>.</p>
<p>This tutorial can be used in couple of different ways - the best way depends on your familiarity with energy system modelling. </p>
<p>First, <strong>all users who are not familiar with the way FlexTool manages data using Spine Toolbox functionalities</strong>, should read the <a href="https://irena-flextool.github.io/flextool/spine_toolbox">page on Spine Toolbox workflow</a></p>
<p><strong>If you are new to energy system modelling</strong>, it is probably best to try to build the test system yourself while following the tutorial. This will take time and you will have to look up many data items from the <strong><em>Init</em></strong> database, but it will also force you to learn the concepts. You can also copy-paste data from the <strong><em>Init</em></strong> database to the <strong><em>Input data</em></strong> database when writing the data becomes too tedious. Before you start, it can be a good idea to to check the <a href="https://irena-flextool.github.io/flextool/reference">Essential objects for defining a power/energy system</a> from the beginning of the FlexTool reference page to get an initial understanding of the concepts that will then grow as you learn more. </p>
<p><strong>If you have experience in using other types of energy system models</strong> - or perhaps older versions of FlexTool - it can be sufficient to follow the tutorial while also browsing the <strong><em>Init</em></strong> database using the database editor. Finding the entity classes, entities, and parameter values in the actual database will assist in the learning process. The concept <a href="https://irena-flextool.github.io/flextool/reference">reference</a> page can also be useful.</p>
<p>Finally, <strong>if you are a really experienced modeller</strong>, it can be enough to check the reference section starting from <a href="https://irena-flextool.github.io/flextool/reference">Essential objects for defining a power/energy system</a>. </p>
<h2 id="building-a-small-test-system">Building a small test system</h2>
<p>The system contains three demand nodes, connections between them, a coal plant and a wind plant to provide the energy to the time varying demand. The system is run over a 48 hour timeline. </p>
<p><img alt="System graph" src="../tutorial_fig.png" /></p>
<p>The small system to be built is also directly available in the FlexTool repository (<strong><em>Init</em></strong> SQLite database) and can be opened with the Spine Toolbox database editor. The default workflow for IRENA FlexTool executes the scenarios from the <strong><em>Input data</em></strong> database (and not from the <strong><em>Init</em></strong> SQLite database). The <strong><em>Input data</em></strong> database is empty by default. Therefore, if you want to use directly the contents of the <strong><em>Init</em></strong> database (instead of building the small system step-by-step), you need to copy them to the <strong><em>Input data</em></strong> database before running the scenarios in this tutorial. To copy the data, you need to execute the <strong><em>Initialize</em></strong> workflow item: select the item, press <strong><em>Execute selection</em></strong> from the toolbar.</p>
<p>Remark: in case you had already populated the <strong><em>Input data</em></strong> database, you need to delete the data before importing from <strong><em>Init</em></strong> SQLite database. This can be done with the 'purge' tool from the Database Editor menu: in <code>purge</code>, click on both <em>Select entity and value items</em>, and <em>Select scenario items</em> and then purge.</p>
<ul>
<li><a href="#building-a-small-test-system">Building a small test system</a></li>
<li><a href="#1st-step-a-node-with-no-units">1st step - a node with no units</a></li>
<li><a href="#2nd-step-add-a-coal-unit">2nd step - add a coal unit</a></li>
<li><a href="#3rd-step-add-a-wind-power-plant">3rd step - add a wind power plant</a></li>
<li><a href="#4th-step-add-a-network">4th step - add a network</a></li>
<li><a href="#more-functionality">More functionality</a></li>
</ul>
<h3 id="choosing-the-database">Choosing the database</h3>
<p>You should have the FlexTool project open in the Spine Toolbox. For this tutorial a database <em>time_settings_only.sqlite</em> is provided in the Flextool folder. As the name suggests, it includes the basic time settings needed for running the tool. If you want to know how it is done or how to make your own time settings go to <a href="https://irena-flextool.github.io/flextool/how_to#how-to-create-basic-time-settings">How-to-create-basic-time-settings</a>. How to -section includes simple examples on specific parts of the system. You can explore it after the tutorial.</p>
<p>First make a copy of the database and name it <em>tutorial.sqlite</em>. (In the future a new project should be started by copying <em>time_settings_only.sqlite</em> or the empty database <em>input_data_template.sqlite</em>. Use copy and rename, not directly! Otherwise the progress might be lost when updating the tool, as these databases are part of the repository). Then choose it to be the Input_data:
<img alt="Choose a database" src="../choosing_database.png" /></p>
<h3 id="1st-step-a-node-with-no-units">1st step - a node with no units</h3>
<p>Open the <strong><em>Input data</em></strong> database by double-clicking it in the Spine Toolbox workflow.</p>
<p>The test system is built using <code>alternatives</code>. Alternative is a subset of the system than one can include to a <code>scenario</code> that is optimized by Flextool. For example when adding a wind plant, all the entities related to only the wind plant should be under their own alternative, so that the wind plant can be included or excluded form the <code>scenario</code> seamlessly.</p>
<ul>
<li>Each step will add a new <code>alternative</code>, and the data it contains, on top of the previous ones. </li>
<li>The first <code>alternative</code> will be called <em>west</em> to hold the data for the first <code>node</code> in the model.</li>
<li>The alternative is added in the 'Alternative tree' widget of the 'Spine Database Editor', see figure below.</li>
</ul>
<p><img alt="Add alternative" src="../add_alternative.png" /></p>
<p>Next step is to add an entity for the first <code>node</code> that will be called <em>west</em>. </p>
<ul>
<li>Right-click on the <code>node</code> class in the entity tree to select 'Add entities'. </li>
<li>Use the dialog to add the <em>west</em> <code>node</code> and click ok. See the figures below.</li>
<li>Later other entities will need to be added in the same manner.</li>
</ul>
<p><img alt="Add object1" src="../add_object_dialog.png" /> 
<img alt="Add object2" src="../add_object_dialog2.png" /></p>
<p>Next, add the <em>west</em> node to be active in the <em>west</em> <code>alternative</code>. This can be done from the <code>Entity Alternative</code> sheet. <code>Entity Alternative</code> chooses if the entity is part of the alternative or not. (If you are in 0.7 Toolbox, last update before 5/2024, this does not exist. Instead, use parameter <code>is_active</code>: yes)</p>
<p><img alt="Add object3" src="../entity_alternative.PNG" /></p>
<p>Then, add parameter data to the newly minted <em>west</em> <code>node</code>:
<em>west</em> node represents the demand in a part of the system.</p>
<ul>
<li>First add an <code>inflow</code> parameter with negative values to indicate negative inflow, i.e. demand. The <code>inflow</code> timeseries are given as a map-type parameter where the first column contains the names of the timesteps and the second column contains the inflow parameter value for that timestep. This is tedious to do by hand, so you can also copy-paste this from the init database.</li>
<li>There are no electricity generating units and the demand cannot be met by ordinary means. The model will therefore use the upward slack variable and accept the <code>penalty_up</code> cost associated with it. This represents the cost of not fulfilling the demand. Also downward <code>penalty_down</code> is defined although the model is not using it at this stage. Here values of 9000 and 8000 are used respectively. By default the model uses the value 10 000 for these. Therefore, it is not mandatory to set them, but sometimes these values need to be changed, so understanding how they work is nessesary.</li>
<li>Penalties and slack variables are tools of linear optimization. They ensure that the problem is feasable at all timesteps even when the in-out-balance of the nodes is violated. If no real penalty values are known, one should just use large enough numbers, so that the system won't prefer penalty to energy production. In the results, you can see at which timesteps the penalties are used.</li>
<li>The parameter <code>has_balance</code> is related to this and should be set to <em>yes</em>. It forces the node to have a balance on inflow and outflow. If the demand is not fulfilled, balance is forced by the slack variable that will "create" the energy with the penalty associated with it. </li>
<li>All parameters here should be part of the <em>west</em> <code>alternative</code> (column alternative_name) - they will be used whenever a <code>scenario</code> includes the <em>west</em> <code>alternative</code>. The difference between parameter <code>alternative</code> and <code>Entity Alternative</code> is that the former includes only that specific parameter and the latter includes the entity itself.</li>
</ul>
<p><img alt="First_node" src="../west_node.png" /></p>
<p>The new entities and parameters have now been staged. Even though it looks like they are in the database, they really are not - they need to be <strong>committed</strong> first. This can be done from the menu of the Database Editor (there is a <em>commit</em> command) or by pressing <em>ctrl-enter</em>. One should write an informative commit message about the changes that have been made. All commits, and the data they have affected, can be seen later from the <em>history</em> menu item.</p>
<h3 id="interlude-creating-a-scenario-and-running-the-model">Interlude - creating a scenario and running the model</h3>
<p>Even though the model is very simple and will not do anything interesting, it can be executed. It is first necessary to create the scenario to be executed. Scenarios are created from <code>alternatives</code> in the Scenario tree widget of the Database Editor. In the figure below, a <code>scenario</code> called <em>Test-scenario</em> is created that should contain <code>alternatives</code> <em>west</em>, <em>init</em> and <em>init_2day-test</em> in order to have both a node and a model structure included in the model. The new <code>scenario</code> must also be <strong>committed</strong>, before it can be used. A new scenario should be added after each step in the tutorial process. </p>
<p><img alt="Add scenario" src="../add_scenario.png" /></p>
<p>Note that the order of the alternatives matters if there are conflicts between the alternatives. The alternatives lower down override the alternatives higher up on the list. In this example the <em>init</em> alternative has a full-year timeblock, but because the <em>init_2day-test</em> is lower in the scenario tree, the tool uses its <code>model</code>-<em>flextool</em>: solves parameter which points to the solve to be included in the model (<em>2day-dispatch</em>) and only it will be solved.</p>
<p>Same logic will apply if you would add a parameter <code>inflow</code> with a value -100 to the <em>west</em> node in the alternative <code>init</code>. The model would use that instead of the previously set timeseries, because the <code>init</code> alternative is lower down in the alternative list of the scenario.</p>
<p>Once the scenario has been committed to the database, it becomes available in the Spine Toolbox workflow. One can select scenarios to be executed from the arrow that leaves the <strong><em>Input data</em></strong> database. At this point, there will be only the <em>Test-scenario</em> available and should be selected. There is also a tool filter with <em>FlexTool3</em> pre-selected. This selection needs to be present when running scenarios (it is used to filter the <code>is_active</code> entities into the scenario).</p>
<p><img alt="Select scenario" src="../select_scenario.png" /></p>
<p>Next, we want to run three tools: <strong><em>Export_to_CSV</em></strong> (that will make input files suitable for FlexTool), <strong><em>FlexTool3</em></strong> (which is a Python script that calls the FlexTool model generator for each solve) and <strong><em>Import_results</em></strong> (which will take output files from FlexTool and drop their contents to the <strong><em>Results</em></strong> database with a particular <code>alternative</code> name). First, select the three tools (select with left click while ctrl is pressed or draw an area with ctrl pressed, see figure below). Then, press <strong><em>Execute selection</em></strong> from the menu bar. The three items should be executed and if all goes well, then green check marks appear on each of the tool once it has finished. You can explore the outputs of each item by selecting the item and looking at the <strong><em>Console</em></strong> widget window.</p>
<p><img alt="Choose workflow items" src="../choose_workflow_items.png" /> 
<img alt="Executed selected items" src="../execute_selected.png" /></p>
<p>It is now possible to explore model results for the <em>Test-scenario</em> using either the <strong><em>Results</em></strong> database or the Excel file that can be exported by executing the <strong><em>To_Excel</em></strong> exporter tool. When doing that, no scenarios should be selected so that the tool will create one Excel file with data from all the alternatives that are in the results database (which will make more sense once there are more scenario results). The generated Excel file can be found by selecting the <strong><em>To_Excel</em></strong> tool and clicking on the folder icon on top-right of the <strong><em>Link properties</em></strong> widget window.</p>
<p>By running the <code>Open_summary</code> tool, a quick summary csv file will open. This supports only runs with one scenario.</p>
<h3 id="2nd-step-add-a-coal-unit">2nd step - add a coal unit</h3>
<p>In the second step, a coal unit is added. </p>
<ul>
<li>
<p>The first thing is to add a new <code>alternative</code> <em>coal</em> so that all new data added in this step will become part of the <em>coal</em> <code>alternative</code>.</p>
</li>
<li>
<p>Then one needs to add the entities:</p>
</li>
<li>
<p><code>unit</code> <em>coal_plant</em></p>
</li>
<li><code>node</code> <em>coal_market</em> </li>
<li><code>commodity</code> <em>coal</em></li>
</ul>
<p>The <code>unit</code> <em>coal_plant</em> and the <code>node</code> <em>coal_market</em> need to be added to the <em>coal</em> alternative from the <code>Entity Alternative</code> sheet.</p>
<p>You might be wondering why <code>commodity</code> does not need to be added to the <code>Entity Alternative</code>. The direct reason is that it is active by default. This can be assumed, since it does not matter if a commodity is in a model, but it is not used. It will be used only if the node using the commodity is included in the model.</p>
<ul>
<li>
<p>Add entities:</p>
</li>
<li>
<p><code>unit__inputNode</code> <em>coal_plant, coal_market</em> to indicate that the <em>coal_plant</em> is using inputs from the <em>coal_market</em></p>
</li>
<li><code>unit__outputNode</code> <em>coal_plant, west</em> to indicate that the <em>coal_plant</em> will output electricity to the <em>west</em> node</li>
<li>
<p><code>commodity__node</code> <em>coal, coal_market</em></p>
</li>
<li>
<p><em>coal_plant</em> needs the following parameters (all set for the <em>coal</em> alternative): </p>
</li>
<li>
<p><code>efficiency</code> (e.g. 0.4 for 40% efficiency)</p>
</li>
<li>
<p><code>existing</code> to indicate the existing capacity in the coal_plant (e.g. 500 MW)</p>
</li>
<li>
<p><em>coal</em> <code>commodity</code> needs just one parameter for <code>price</code> (e.g. 20 â‚¬/MWh of fuel)</p>
</li>
<li>All these new parameters should be now part of the <em>coal</em> <code>alternative</code>. </li>
</ul>
<p><img alt="Add unit" src="../add_unit.png" /></p>
<p>To see how the results change due to the coal power plant, make a new scenario <em>coal</em> that has the <code>alternatives</code> <em>init</em>, <em>init_2day-test</em>, <em>west</em> and <em>coal</em>. Run the <strong><em>Export_to_CSV</em></strong>, <strong><em>FlexTool3</em></strong> and <strong><em>Import_results</em></strong> to get the results to the <strong><em>Results</em></strong> database. If you start to get too many result <code>alternatives</code> in the <strong><em>Results</em></strong> database (e.g. if you happen to run the same scenario multiple times), you can delete old ones by removing the unwanted <code>alternatives</code> (right-click on the <code>alternative</code>) and then <strong>committing</strong> the database.</p>
<p>If you now want to only export the results of the <em>coal</em> run to excel, you can do this by choosing the Alternative filter and choosing the run you want to export.</p>
<p><img alt="Choosing_alternative" src="../choose_alternative_to_excel.png" /></p>
<h3 id="interlude-visualizing-the-system-in-a-graph">Interlude - visualizing the system in a graph</h3>
<p>In Spine Toolbox, it is possible to visualize your system in a graph, which will show all entities, and how they are related to each other.
To open this visualization mode, open the <strong><em>Input data</em></strong> database. In the top right corner, click on the menu. Select <strong><em>Graph</em></strong> in the <em>View</em> section.
You may visualize all entities by selecting <em>root</em> in the <em>Entity tree</em>, or choose specifically the entities you want to display by selecting them in the <em>Entity tree</em> (maintain ctrl to select multiple entities).</p>
<p><img alt="Graph_view" src="../graph_view.png" />
<img alt="Graph_view_example" src="../graph_view_example.png" /></p>
<h3 id="3rd-step-add-a-wind-power-plant">3rd step - add a wind power plant</h3>
<p>Next, a wind power plant is added.</p>
<ul>
<li>Add a new <code>alternative</code> <em>wind</em></li>
<li>
<p>Add entities:</p>
</li>
<li>
<p><code>unit</code> <em>wind_plant</em></p>
</li>
<li>
<p><code>profile</code> <em>wind_profile</em> since <em>wind_plant</em> does not require a commodity, but instead uses a profile to limit the generation to the available wind.</p>
</li>
<li>
<p><code>unit__node__profile</code> <em>wind_plant, west, wind_profile</em></p>
</li>
<li>
<p><code>unit__outputNode</code> <em>wind_plant, west</em></p>
</li>
<li>
<p>Add the <code>unit</code> <em>wind_plant</em> to the <em>wind</em> <code>Entity Alternative</code>. Again, the <code>profile</code> does not need to be added, because it active by default and is only part of the model if connected by a <code>unit__node__profile</code> or <code>node_profile</code>.</p>
</li>
<li>
<p><em>wind_plant</em> needs the following parameters (all set for the <em>wind</em> alternative):</p>
</li>
<li>
<p><code>conversion_method</code> to choose a method for the conversion process (in this case <em>constant_efficiency</em>)</p>
</li>
<li><code>efficiency</code> for <em>wind_plant</em> should be set to 1.</li>
<li>
<p><code>existing</code> capacity can be set to 1000 MW</p>
</li>
<li>
<p><em>wind_profile</em> needs the the parameter <code>profile</code> with a map of values where each time step gets the maximum available capacity factor for that time step (see figure). Again, you can copy this from the init database.</p>
</li>
<li><em>wind_plant, west, wind_profile</em> entity needs a parameter <code>profile_method</code> with the choice <em>upper_limit</em> selected. This means that the <em>wind_plant</em> must generate at or below its capacity factor.</li>
</ul>
<p>You can now create a new scenario <em>wind</em>,  that has the <code>alternatives</code> <em>init</em>, <em>west</em>, <em>coal</em> and <em>wind</em>.
Remember to <strong>commit</strong>, execute and have a look at the results (there should be no more penalty values used, since the coal and wind plant can together meet the demand in all hours).</p>
<p><img alt="Add another unit" src="../add_unit2.png" /></p>
<h3 id="4th-step-add-a-network">4th step - add a network</h3>
<p>A <em>network</em> <code>alternative</code> introduces </p>
<ul>
<li>two new <code>nodes</code> (<em>east</em> and <em>north</em>) </li>
<li>
<p>three new <code>connections</code> between <code>nodes</code> (<em>east_north</em>, <em>west_east</em> and <em>west_north</em>). </p>
</li>
<li>
<p>All new <code>nodes</code> and <code>connections</code> are added to the <code>Entity Alternative</code> <em>network</em></p>
</li>
</ul>
<p>The new nodes are kept simple: </p>
<ul>
<li>they have a <code>has_balance</code> parameter set to <em>yes</em> (to force the node to maintain an energy balance)</li>
<li>they have a constant negative <code>inflow</code> (i.e. demand)</li>
<li>penalty values for violating their energy balance</li>
</ul>
<p>The three connections have the following parameters:</p>
<ul>
<li>they have a <code>existing</code> parameter to indicate the existing interconnection capacity between the nodes</li>
<li>they have a <code>efficiency</code> parameter  (e.g. 0.9 for 90% efficiency).</li>
</ul>
<p>It is also necessary to create the entities <code>connection__node__node</code> for <em>east_north | east | north</em>, <em>west_north | west | north</em> and <em>west_east | west | east</em>.</p>
<p>The <em>north</em> <code>node</code> has the lowest upward penalty, so the model will prefer to use that whenever the <em>coal</em> and <em>wind</em> units cannot meet all the demand. Sometimes the <code>existing</code> capacity of the new <code>connections</code> will not be sufficient to carry all the needed power, since both generators are producing to the <em>west</em> <code>node</code>. <strong>Commit</strong>, execute and explore.</p>
<p><img alt="Add network" src="../add_network.png" /></p>
<h3 id="more-functionality">More functionality</h3>
<p>Now you have learned how to create a small model. Remember that you can change which database is used as the <em>Input_data</em> by clicking the tool icon. You can make a copy of the <em>Results</em> database if you want to keep them. The database can also be purged from previous results with the 'purge' tool from the Database Editor menu: in <code>purge</code>, click on both <em>Select entity and value items</em>, and <em>Select scenario items</em> and then purge. Purging by itself will not reduce the file size, you will have to <code>Vacuum</code> it to do this.</p>
<p>More instructions on how to create individual parts of the model can be found in the <a href="https://irena-flextool.github.io/flextool/how_to">How to</a> section.</p>
<p>You can also look and play with the ready scenarios from the init database. Purge <em>Input_data</em> and <em>Initialize</em> it to copy the init database to it. Purging is done the same way as above: This can be done with the 'purge' tool from the Database Editor menu: in <code>purge</code>, click on both <em>Select entity and value items</em>, and <em>Select scenario items</em> and then purge. Then select the initialize tool and run it to copy the init.sqlite to the input_data.sqlite.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      IRENA
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy", "navigation.expand"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
      
        <script src="../assets/mathjaxhelper.js"></script>
      
    
  </body>
</html>